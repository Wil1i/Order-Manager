<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <%- include("./templates/head.ejs", {css : "users.css"}) %>
</head>
<body>
    <div class="sideBar-container">
        <%- include("./templates/sideBar.ejs", {active : "users"}) %>
        <%- include("./templates/flash.ejs") %>
    </div>

    <div class="users-container">
        <button id="add-user-btn">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="users-icon">
                <path stroke-linecap="round" stroke-linejoin="round" d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z" />
            </svg>
            افزودن کاربر
        </button>
        <form id="add-user-container" method="post" action="/users">
            <div id="add-user-box">
                <h1>  
                    افزودن کاربر
                </h1>
                <p id="close">X</p>
    
                <div class="user-input-handler">
                    <input required type="text" name="username" placeholder="نام کاربری">
                    <input required type="password" name="password" placeholder="کلمه عبور">
                    <input required type="password" name="repeat-password" placeholder="تکرار کلمه عبور">
                    <select name="rank" required>
                        <option value="user">کاربر</option>
                        <option value="admin">مدیر</option>
                    </select>
                </div>

                <button type="submit">افزودن</button>
            </div>
        </form>
        <div class="users">

            <% users.forEach(user => { %>

                <div class="user">
                    <div class="picture-container">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="profilePicture">
                            <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <div class="user-info">
                        <p><%= user.username %></p>
                        <div class="user-price-container">
                            <p class="user-price-item author">
                                <%= user.rank %>
                                
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                    <path fill-rule="evenodd" d="M8.603 3.799A4.49 4.49 0 0 1 12 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 0 1 3.498 1.307 4.491 4.491 0 0 1 1.307 3.497A4.49 4.49 0 0 1 21.75 12a4.49 4.49 0 0 1-1.549 3.397 4.491 4.491 0 0 1-1.307 3.497 4.491 4.491 0 0 1-3.497 1.307A4.49 4.49 0 0 1 12 21.75a4.49 4.49 0 0 1-3.397-1.549 4.49 4.49 0 0 1-3.498-1.306 4.491 4.491 0 0 1-1.307-3.498A4.49 4.49 0 0 1 2.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 0 1 1.307-3.497 4.49 4.49 0 0 1 3.497-1.307Zm7.007 6.387a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z" clip-rule="evenodd" />
                                  </svg>
                                  
                            </p>
                            <p class="user-price-item author">
                                <%= user.createdBy %>
                                
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                    <path fill-rule="evenodd" d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z" clip-rule="evenodd" />
                                </svg>
                            </p>
                        </div>
                    </div>
                    <a href="/users/<%= user.id %>" class="btn">بیشتر</a>
                </div>

            <% }) %>

        </div>
    </div>

    <script>
        var addUserContainer = document.getElementById("add-user-container")
        var addUserBtn = document.getElementById("add-user-btn")
        var closeBtn = document.getElementById("close")

        addUserBtn.addEventListener("click", () => {
            addUserContainer.style.display = "flex"
        })

        closeBtn.addEventListener("click", () => {
            addUserContainer.style.display = "none"
        })
    </script>
</body>
</html>